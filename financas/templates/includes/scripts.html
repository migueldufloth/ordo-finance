<script>
    // Theme Management
    function setTheme(theme) {
        localStorage.setItem('theme', theme);
        applyTheme(theme);
    }

    function applyTheme(theme) {
        const html = document.documentElement;
        const themeIcon = document.getElementById('theme-icon');
        const mobileThemeIcon = document.getElementById('mobile-theme-icon');

        if (theme === 'dark' || (theme === 'system' && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
            html.classList.add('dark');
            if (themeIcon) themeIcon.setAttribute('data-lucide', 'moon');
            if (mobileThemeIcon) mobileThemeIcon.setAttribute('data-lucide', 'moon');
        } else {
            html.classList.remove('dark');
            if (themeIcon) themeIcon.setAttribute('data-lucide', 'sun');
            if (mobileThemeIcon) mobileThemeIcon.setAttribute('data-lucide', 'sun');
        }

        // Update icons
        if (typeof lucide !== 'undefined') {
            lucide.createIcons();
        }
    }

    // Language Management
    function setLanguage(lang) {
        localStorage.setItem('language', lang);
        // Here you would implement language switching logic
        // For now, just show a notification
        showNotification(`Idioma alterado para: ${lang === 'pt-br' ? 'Português' : lang === 'en' ? 'English' : 'Español'}`);
    }

    // Simple notification function
    function showNotification(message) {
        const notification = document.createElement('div');
        notification.className = 'fixed top-4 right-4 bg-primary-500 text-white px-4 py-2 rounded-lg shadow-lg z-50 animate-fade-in';
        notification.textContent = message;
        document.body.appendChild(notification);

        setTimeout(() => {
            notification.remove();
        }, 3000);
    }

    // Initialize theme on page load
    document.addEventListener('DOMContentLoaded', function () {
        // Initialize Lucide icons
        lucide.createIcons();

        // Apply saved theme or system preference
        const savedTheme = localStorage.getItem('theme') || 'system';
        applyTheme(savedTheme);

        // Listen for system theme changes
        window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', () => {
            const currentTheme = localStorage.getItem('theme') || 'system';
            if (currentTheme === 'system') {
                applyTheme('system');
            }
        });
    });
</script>